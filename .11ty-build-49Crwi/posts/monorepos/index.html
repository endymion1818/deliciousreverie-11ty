<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>monorepos.</title>
    <meta name="description" content="I&#39;ve recently been introduced to the use of monorepos to manage projects and have a few thoughts on the idea.">
    <meta property="og:site_name" content="monorepos.">
    <meta property="og:locale" content="en_GB">
    <meta property="og:type" content="website">
    <meta property="og:description" content="I&#39;ve recently been introduced to the use of monorepos to manage projects and have a few thoughts on the idea.">
    <meta property="og:title" content="monorepos." />
    <meta property="og:image" content="/img/sharecard-default.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@muzzlehatch_" />
    <meta name="twitter:title" content="monorepos." />
    <meta
      name="twitter:description"
      content="I&#39;ve recently been introduced to the use of monorepos to manage projects and have a few thoughts on the idea."
    />
    <meta name="twitter:image" content="/img/sharecard-default.png" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "NewsArticle",
        "headline": "monorepos.",
        "author": {
          "@type": "Person",
          "name": "Benjamin Read"
        },
        "datePublished": "2021-06-04T15:21:21+01:00",
        "image": "/img/sharecard-default.png"
      }
    </script>
    <link rel="icon" href="/img/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Delicious Reverie">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Delicious Reverie">
  </head>
  <body>
    <a id="skiplinks" href="#main">Skip to main content</a>
    <p class="themeswitcher">Choose theme:</p>
    <label class="themeswitcher" for="dark">Light</label>
    <input class="themeswitcher" type="radio" id="light" name="colors" value="light">
    <label  class="themeswitcher" for="dark">Dark</label>
    <input  class="themeswitcher" type="radio" id="dark" name="colors" value="dark">
    <header>
      <div class="container">
        <div class="title home"><a href="/">Delicious Reverie</a></div>
        <p class="subtitle">blog of developer &amp; bookworm benjamin read</p>
        <nav>
          <ul class="list-inline">
            <li class="nav-item">
              <a href="/">Home</a>
            </li>
            <li class="nav-item">
              <a href="/about/">About</a>
            </li>
            <li class="nav-item">
              <a href="/links/">Links</a>
            </li>
            <li class="nav-item">
              <a href="/posts/">Archive</a>
            </li>
            <li class="nav-item">
              <a href="/contact/">Contact</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="main tmpl-post">
      
      <div class="container">
        <h1>monorepos.</h1>

<time datetime="2021-06-04">04 Jun 2021</time><a href="/tags/monorepos/" class="post-tag">monorepos</a><a href="/tags/git/" class="post-tag">git</a><a href="/tags/devops/" class="post-tag">devops</a>

<p><strong>I've recently been introduced to the use of monorepos to manage projects, and have a few thoughts on the idea.</strong></p>
<p>First of all, I'd better explain what a monorepo is. The idea is that instead of having many different Git repositories for a group of related projects, you have just one, containing all of your different projects that come under a common umbrella.</p>
<p>Many projects that I am interested, and to some extent involved in, use monorepo tools to manage their work.</p>
<h2 id="advantages" tabindex="-1">Advantages <a class="direct-link" href="#advantages" aria-hidden="true">#</a></h2>
<p>A few of the advantages are that you can more easily get a &quot;birds eye&quot; view of the project, so if you're a new starter you can easily see what the coding styles are in other projects that might be similar to yours. This helped me when I started working at Purple Bricks: I could use some of the code that was already there in other applications to call APIs, build UIs and other things without having to ask my team mates hundreds of questions.</p>
<p>Another advantage is that you can also share resources such as NPM packages in a more uniform manner. There's often just one <code>node_modules</code> folder instead of one for each project, and you can have one <code>package.json</code>, meaning every project uses the same version of each module you have installed or built. If you publish a new version of a shared library, the updates are pulled into the project on the next release, which can save a lot of laborious manual updates.</p>
<h2 id="necessities" tabindex="-1">Necessities <a class="direct-link" href="#necessities" aria-hidden="true">#</a></h2>
<p>There's a flipside to that though: because shared modules are updated instantaneously, thorough testing is needed to make sure and changes aren't going to detrimentally affect some projects.</p>
<p>There's also quite a bit of configuration involved, since all of your unit, integration and end-to-end tests are typically managed through the monorepo. I'm currently using the <a href="https://nx.dev/">Nx monorepo management tool from Nrwl</a>, which has done a lot to streamline the development process.</p>
<p>Nx has a command-line tool, so you can run <code>nx affected:test</code> to run tests for all of the applications you've <em>affected</em>, or altered, with the code you're writing. Nrwl claims to be very smart about this, so it can tell what's been updated and only test those affected apps.</p>
<p>In reality this means that if you change something in a shared library, you have to run <em>all</em> of the tests for that library, as well as <em>all</em> of the tests for each of the affected applications. This can take quite a considerable amount of time as you add different applications to your workflow, and in my experience it soon gets really slow.</p>
<p>We have a common shared UI library which is in active development, as most shared UI libraries tend to be. Each time we touch anything to do with these, it takes up to an hour for all of the CI checks to complete, and there can be timeout issues depending on the availability of the pipeline.</p>
<p><a href="https://lerna.js.org">Lerna</a>, an alternative, older monorepo management tool, has a concept of <a href="https://github.com/lerna/lerna#independent-mode">independent projects</a>, which works similarly to if you have separate repositories. But that does negate some of the streamlining that shared projects have.</p>
<h2 id="verdict" tabindex="-1">Verdict <a class="direct-link" href="#verdict" aria-hidden="true">#</a></h2>
<p>So far, I've benefited quite a bit by using Nx to manage our projects. development is somewhat simpler, it's learner friendly, and streamlines some of the issues you may have experienced if you've worked on projects with interdependent code.</p>
<p>However, it comes at quite a high price: configuration can be a pain, and build times do become extremely frustrating.</p>
<p>If you judge the price is worth the benefits, it's worth adopting this approach. Careful thought is warranted though, since it is an investment you'll have to live with for some time!</p>

<hr>
<ul><li>Next: <a href="/posts/lowest-tech-first/">Lowest tech first</a></li><li>Previous: <a href="/posts/first-steps-with-sveltekit/">First steps with Sveltekit</a></li>
</ul>

      </div>
    </main>

    <footer>
        <div class="footer-top">
          <div class="container">
            <blockquote>
              <span class="title">“Wisest are they who know they do not know.”</span>
              <attr>
                &mdash; Jostein Gaarder
              </attr>
            </blockquote>
          </div>
        </div>
        <div class="footer-bottom">
          <div class="container">
            <h2>About This Site</h2>
            <p><a href="/">Delicious Reverie</a> is the blog of developer & bookworm <span class="h-card">benjamin read</span>. Set in Lovechild and your system font. Built with <a href="https://www.11ty.dev">Eleventy</a> and <a href="https://slinkity.dev">Slinkity</a>, hosted by Netlify. &copy; Some rights are reserved. This site doesn't use any cookies or other session storage and has no tracking scripts.</p>
          <h3>Where you can find me:</h3>
            <ul class="list-inline">
              <li><a href="https://twitter.com/muzzlehatch_">twitter</a></li>
              <li><a href="https://www.linkedin.com/in/benjaminread1980/">linkedin</a></li>
              <li><a href="https://github.com/endymion1818/">github</a></li>
              <li><a href="/feed.xml">RSS Feed</a></li>
            </ul>
          </div>
        </div>
    </footer>
  </body>
</html>
